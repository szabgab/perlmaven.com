=title Find the first element in an array in Perl that satisfies a condition
=timestamp 2020-11-30T15:30:01
=indexes first, grep, List::Util
=status show
=author szabgab
=archive 1
=description Finding the first element of an array that matches some arbitrary condition without going over all the array.
=comments_disqus_enable 0
=show_related 1

=abstract start

When you need to find the first element in an array that satisfies some condition, the first solution that might come to mind is to loop
over all the elements using <b>for</b> and check them one by one. This would yield a working code, but there are nicer solution.

=abstract end

The condition is simple, the first animal that is longer than 5 characters.

<h2>First matching element using a for loop</h2>

<include file="examples/first_loop.pl">

In this solution we stop the iteration using the <b>last</b> statement when we found the first match.

<h2>First matching element using grep</h2>

People who are more experienced with Perl, might use the <a href="/filtering-values-with-perl-grep">grep</a> function.

<include file="examples/first_grep.pl">

It is much more compact, but it will not stop the operation on the first value and it will return the list of all the
matching values. We use a pair of parentheses around a scalar variable on the left-hand-side of the assignment to
store the first element from the returned list. So the solution is correct, but it is wasteful, especially if the original array
is long and if the cost of each check is large. (Not in our case, but I trust you can imagine a longer array with more animals
and a more complex condition.)

<h2>First element using the first function</h2>

The <a href="https://metacpan.org/pod/List::Util">List::Util</a> module provides a function called <b>first</b> that solves this problem.
The syntax is exactly the same as with the <b>grep</b> function, but it will stop checking the condition after encountering the first
element that meets the condition.

<include file="examples/first.pl">

<h2>Compare grep and first</h2>

You might not trust me or the documentation that the <b>first</b> function stops as soon as possible, so
I made some changes, moved the condition to a separate function that would also print each time it is called.

<include file="examples/first_log.pl">

The result:

<code>
length of snake
length of camel
length of etruscan shrew
length of ant
length of hippopotamus
length of giraffe
etruscan shrew
---------
length of snake
length of camel
length of etruscan shrew
etruscan shrew
</code>

As you can see yourself, the solution using <b>grep</b> printed all the values from the array.
The solution using <b>first</b> only printed up till the first matching element.

<h2>Etruscan shrew</h2>

In case you were wondering the <a href="https://en.wikipedia.org/wiki/Etruscan_shrew">Etruscan shrew</a>
is the smallest mammal by mass.

<img src="/img/220px-Suncus_etruscus.jpg" alt="Etruscan shrew">

There is a shorter mammal, but this looks better.

